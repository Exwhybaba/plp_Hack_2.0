{% extends "base.html" %}
{% block title %}New Report{% endblock %}

{% block content %}
<div class="form-container">
  <h2>Create a New Feed Report</h2>
  <form method="post">

    <!-- Basic Info -->
    <div class="form-group">
      <label>Feed Name</label>
      <input type="text" name="feed_name" required>
    </div>

    <div class="form-group">
      <label>Feed Code</label>
      <input type="text" name="feed_code">
    </div>

    <div class="form-group">
      <label>Report Date</label>
      <input type="date" name="report_date" required>
    </div>

    <div class="form-group">
      <label>Total Amount (kg)</label>
      <input type="number" step="0.01" name="amount" required>
    </div>

    <!-- Nutritional Specs -->
    <h3>Nutritional Requirements</h3>
    <div class="form-group">
      <label>Crude Protein (%)</label>
      <input type="number" step="0.01" name="cp">
    </div>
    <div class="form-group">
      <label>Metabolizable Energy (Kcal/kg)</label>
      <input type="number" step="0.01" name="me">
    </div>
    <div class="form-group">
      <label>Calcium (%)</label>
      <input type="number" step="0.01" name="calcium">
    </div>
    <div class="form-group">
      <label>Phosphorus (%)</label>
      <input type="number" step="0.01" name="phosphorus">
    </div>

    <!-- Ingredients -->
    <h3>Ingredients</h3>
    <div id="ingredients-container">
      <div class="ingredient-row">
        <input type="text" name="ingredient_name[]" placeholder="Ingredient name">
        <input type="number" step="0.01" name="ingredient_qty[]" placeholder="Quantity (kg)">
        <input type="number" step="0.01" name="ingredient_price[]" placeholder="Price per kg">
      </div>
    </div>
    <button type="button" id="add-ingredient">+ Add Ingredient</button>

    <!-- Submit -->
    <div class="form-group">
      <button type="submit">Save Report</button>
    </div>
  </form>
</div>

<script>
  document.getElementById("add-ingredient").addEventListener("click", function() {
    const container = document.getElementById("ingredients-container");
    const row = document.createElement("div");
    row.classList.add("ingredient-row");
    row.innerHTML = `
      <input type="text" name="ingredient_name[]" placeholder="Ingredient name">
      <input type="number" step="0.01" name="ingredient_qty[]" placeholder="Quantity (kg)">
      <input type="number" step="0.01" name="ingredient_price[]" placeholder="Price per kg">
    `;
    container.appendChild(row);
  });
</script>
{% endblock %}
